       <!-- adduser -->
       <ng-template #content let-c="close" let-d="dismiss">
  
        <mat-toolbar color="primary">
          <mat-toolbar-row fxLayout="row bg-color">
      
            <span class="title-center">Ajouter un nouveau utilisateur</span>
            <button
              type="button"
              class="d-block mr-0 ml-auto btn-close" (click)="d('Cross click')"
              aria-label="Close"
              mat-dialog-close
              (click)="handleClear()"
            ></button>
          </mat-toolbar-row>
        </mat-toolbar>
        <div class="modal-body">
        <form [formGroup]="userDetail" >
          <div class="pl-lg-4 field">
            <div class="row formbg-inner   ">
              <div class="col-lg-6">
                <h6 class="heading-small text-muted mb-4">
                  Les informations de l'utilisateur :
                </h6>
                
                <div class="padding-bottom--24" >
                  <label class="form-control-label"  for="input-userName">Nom d'utilisateur</label>
                  <input type="text" formControlName="userName" id="input-userName" class="form-control form-control-alternative "  placeholder="Le nom d'utilisateur " value="" required minlength="4">
                  <mat-error  *ngIf="userDetail.controls.userName.touched && userDetail.controls.userName.invalid">
                    <span *ngIf="userDetail.controls.userName.errors.required"> Ce champ est obligatoire</span>
                    <span *ngIf="userDetail.controls.userName.errors.pattern"> Ce champ est invalide</span> 
                    <span *ngIf="userDetail.controls.userName.errors.minlength"> Le nom doit comporter au moins 4 caractères</span>
                  </mat-error>
                  </div>
                  <div class="padding-bottom--24" >
                    <label class="form-control-label"  for="input-email">Email</label>
                    <input type="text" formControlName="email" id="input-email" class="form-control form-control-alternative "  placeholder="L'email de l'utilisateur " value="" required minlength="4">
                    <mat-error *ngIf="userDetail.controls.email.touched && userDetail.controls.email.invalid">
                      <span *ngIf="userDetail.controls.email.errors.required"> Ce champ est obligatoire</span>
                      <span *ngIf="userDetail.controls.email.errors.pattern"> Ce champ est invalide, il doit être un email</span> 
                    </mat-error>
                    </div>
                    <div class="padding-bottom--24" >
                      <label class="form-control-label"  for="input-userPassword">Mot de passe</label>
                      <input type="text" formControlName="userPassword" id="input-userPassword" class="form-control form-control-alternative "  placeholder="Le mot de passe  " value="" required minlength="4">
                      <mat-error  *ngIf="userDetail.controls.userPassword.touched && userDetail.controls.userPassword.invalid">
                        <span *ngIf="userDetail.controls.userPassword.errors.required"> Ce champ est obligatoire</span>
                        <span *ngIf="userDetail.controls.userPassword.errors.pattern"> Ce champ est invalide</span> 
                        <span *ngIf="userDetail.controls.userPassword.errors.minlength"> Le mot de passe doit comporter au moins 4 caractères</span>
                      </mat-error>
                      </div>
                      <div class="padding-bottom--24">
                        <label class="form-control-label" for="input-profil">Profil</label>
                      <select multiple formControlName="profil" id="select-profil" class="form-control form-control-alternative" value="profil.name">
                        <option value="" disabled selected hidden>Sélectionnez un profil</option>
                        <option *ngFor="let profil of profilList" [value]="profil.name" >{{profil.name}}</option>
                      </select>
                      </div>
                      <!-- <div class="padding-bottom--24">
                      <mat-form-field appearance="fill">
                        <mat-label class="form-control-label" for="input-profil">Profil</mat-label>
                        <mat-select formControlName="profil"  class="form-control form-control-alternative" multiple>
                          <mat-option *ngFor="let profil of profilList" [value]="profil.name">{{profil.name}}</mat-option>
                        </mat-select>
                      </mat-form-field>
                    </div> -->
    
              </div>
            </div>
          </div>
          <div>
            <mat-dialog-actions class="btn-group padding--14">
              <button class="btn button-2 bg-cb"  [disabled]="!userDetail.valid" mat-strocked-button type="submit" (click)="c('Save click')" (click)="addUser()"  (click)="handleClear()">
                Ajouter un utilisateur
              </button>
              <button  class="btn button-2 bg-cr"  mat-stroked-button  mat-dialog-close  (click)="close(content)" (click)="handleClear()">
                Fermer
              </button>
            </mat-dialog-actions>
          </div>
        </form>
      </div>
           
          </ng-template>

          <!-- editproject -->
        
          <ng-template #contentUpdate let-c="close" let-d="dismiss">
      
            <mat-toolbar color="primary">
              <mat-toolbar-row fxLayout="row bg-color">
          
                <span class="title-center">Mettre à jour l'utilisateur</span>
                <button
                  type="button"
                  class="d-block mr-0 ml-auto btn-close" (click)="d('Cross click')"
                  aria-label="Close"
                  mat-dialog-close
                  (click)="handleClear()"
                ></button>
              </mat-toolbar-row>
            </mat-toolbar>
            <div class="modal-body">
            <form [formGroup]="userDetail" >
              <div class="pl-lg-4 field">
                <div class="row formbg-inner   ">
                  <div class="col-lg-6">
                    <h6 class="heading-small text-muted mb-4">
                      Les informations de l'utilisateur :
                    </h6>
                    <div class="padding-bottom--24" >
                      <label class="form-control-label"  for="input-userName">Nom d'utilisateur</label>
                      <input type="text" formControlName="userName" id="input-userName" class="form-control form-control-alternative "  placeholder="Le nom d'utilisateur " value="" required minlength="4">
                      <mat-error  *ngIf="userDetail.controls.userName.touched && userDetail.controls.userName.invalid">
                        <span *ngIf="userDetail.controls.userName.errors.required"> Ce champ est obligatoire</span>
                        <span *ngIf="userDetail.controls.userName.errors.pattern"> Ce champ est invalide</span> 
                        <span *ngIf="userDetail.controls.userName.errors.minlength"> Le nom doit comporter au moins 4 caractères</span>
                      </mat-error>
                      </div>
                      <div class="padding-bottom--24" >
                        <label class="form-control-label"  for="input-email">Email</label>
                        <input type="text" formControlName="email" id="input-email" class="form-control form-control-alternative "  placeholder="L'email de l'utilisateur " value="" required minlength="4">
                        <mat-error *ngIf="userDetail.controls.email.touched && userDetail.controls.email.invalid">
                          <span *ngIf="userDetail.controls.email.errors.required"> Ce champ est obligatoire</span>
                          <span *ngIf="userDetail.controls.email.errors.pattern"> Ce champ est invalide, il doit être un email</span> 
                        </mat-error>
                        </div>
                        <div class="padding-bottom--24" >
                          <label class="form-control-label"  for="input-userPassword">Mot de passe</label>
                          <input type="text" formControlName="userPassword" id="input-userPassword" class="form-control form-control-alternative "  placeholder="Le mot de passe  " value="" required minlength="4">
                          <mat-error  *ngIf="userDetail.controls.userPassword.touched && userDetail.controls.userPassword.invalid">
                            <span *ngIf="userDetail.controls.userPassword.errors.required"> Ce champ est obligatoire</span>
                            <span *ngIf="userDetail.controls.userPassword.errors.pattern"> Ce champ est invalide</span> 
                            <span *ngIf="userDetail.controls.userPassword.errors.minlength"> Le mot de passe doit comporter au moins 4 caractères</span>
                          </mat-error>
                          </div>
                          <!--<div class="padding-bottom--24">
                            <label class="form-control-label" for="input-profil">Profil</label>
                          <select formControlName="profil" id="select-profil" class="form-control form-control-alternative" value="profil.name">
                            <option value="" disabled selected hidden>Sélectionnez un profil</option>
                            <option *ngFor="let profil of profilList" [value]="profil.name" >{{profil.name}}</option>
                          </select>
                          </div>-->
                  </div>
                </div>
              </div>
              <div>
                <mat-dialog-actions class="btn-group padding--14">
                  <button class="btn button-2 bg-cb"  [disabled]="!userDetail.valid" mat-strocked-button type="submit" (click)="c('Save click')"
                   (click)="updateUser()"  (click)="handleClear()">
                    modifier projet
                  </button>
                  <button  class="btn button-2 bg-cr"  mat-stroked-button  mat-dialog-close  (click)="close(contentUpdate)" (click)="handleClear()">
                    Fermer
                  </button>
                </mat-dialog-actions>
              </div>
            </form>
          </div>               
              </ng-template>
    
            <!-- getusers -->
            
     
     
     <div class="container-fluid page">
      <div class="d-flex page__box p-3 mt-2">Gestion des utilisateurs</div>
      <div class="page__content shadow p-3 ">
      <div class="page__content-data position-absolute text-center">
             <form>
              <div class="s004">
                <form class="form">
                  <fieldset>
                    <div class="inner-form">
                      <div class="input-field">
                        <input class="form-control" id="choices-text-preset-values" (ngModelChange)="searchUsers(key.value)" #key="ngModel" ngModel
                        name="key" type="search" placeholder="Type to search..." />
                        <span class="input-icon" id="basic-addon1">
                          <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="currentColor" class="bi bi-search" viewBox="0 0 16 16">
                        <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"></path>
                        </svg>
                        </span>
                      </div>
                    </div> 
                  </fieldset>
                </form>
              </div>
            <ul class="responsive-table pad">
              <li class="table-header margt">
                <div [(appSort)]="usersList" data-order="desc" data-name="id" class="col mar padt col-1 text-uppercase text-white font-weight-bolder opacity-7">Id</div>
                <div [(appSort)]="usersList" data-order="desc" data-name="userName" class="col mar padt col-2 text-uppercase text-white font-weight-bolder opacity-7">Nom d'utilisateur</div>
                <div [(appSort)]="usersList" data-order="desc" data-name="profil" class="col mar padt col-3 text-uppercase text-white font-weight-bolder opacity-7">Profil</div>
                <div [(appSort)]="usersList" data-order="desc" data-name="email" class="col  mar padt col-4 text-uppercase text-white font-weight-bolder opacity-7">Email</div>
                <div [(appSort)]="usersList" data-order="desc" data-name="userPassword" class="col padt mar col-5 text-uppercase text-white font-weight-bolder opacity-7">Mot de passe</div>

                <div class="col  col-6 padt margl  text-uppercase text-white font-weight-bolder opacity-7"> Actions</div>
                <div class="col col-7 ">
                          <span class="navbar-toggler-icon"></span>  
                        <div  id="navbarSupportedContent">
                          <button class="btn button-1" data-bs-toggle="modal" (click)="open(content)" ><i><fa-icon [icon]="addIcon"></fa-icon></i></button>
                        </div>
                       
                </div>
                
              </li>
              
              <li class="table-row"  *ngFor="let user of usersList | paginate: { id:'listing_pagination',
              itemsPerPage:4,
              currentPage:page,
              totalItems:totalRec}">
              <div class="col col-1" data-label="Id">{{user.id}}</div>
              <div class="col col-2" data-label="userName">{{user.userName}}</div>
              <div class="col col-3" data-label="profil"  >
               <p *ngFor="let i of user.profils" style="width: 90px; word-wrap:break-word;">{{i.name}}</p> 
              </div>
              <div class="col col-4" data-label="email">{{user.email}}</div>
              <div class="col col-5" data-label="userPassword" style="width: 130px; word-wrap:break-word;">{{user.userPassword}}</div>

                <div class="col margl col-6" >
                  
                  <a href="javascript:;" class="text-secondary font-weight-bold text-xxs" data-toggle="tooltip" data-original-title="Edit user"  (click)="editUser(user)" (click)="open(contentUpdate)">
                    <i> <fa-icon [icon]="editIcon"></fa-icon> </i>
                  </a><br>
                  
                  <a href="javascript:;" class=" padlr text-secondary font-weight-bold text-xxs" data-toggle="tooltip" data-original-title="delete user"  (click)="confirmDelete(user)" >
                    <i><fa-icon [icon]="trashIcon"></fa-icon> </i>
                  </a>
                </div>
                <div class="col  col-7" >
                </div>

              </li>
              
            </ul>
            
      
            <div class="wrapper ">
              <pagination-controls  id="listing_pagination"
                (pageChange)="page=$event"  
           >
      </pagination-controls>
        
    </div>
        </form>
       
    
      
        </div>
      </div>
    </div>
      